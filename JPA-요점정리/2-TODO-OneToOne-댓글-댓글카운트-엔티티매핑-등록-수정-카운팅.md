# 댓글 댓글 카운트 엔티티 매핑 등록, 수정 카운팅

3년차 시절에 댓글,답글,댓글카운트 테이블을 직접 설계해본 경험이 있었다. 이 때 카운트 쿼리가 웹 쪽에서 조회 시마다 매번 수행되면 안되겠다는 생각이 들어서 카운트 테이블을 따로 두어서 조회시마다 댓글 시퀀스에 대한 카운트 테이블의 해당 값도 같이 증감시키도록 했었다. 필요할 때마다 매번 조회시마다 댓글 테이블을 카운팅해서 쓰면 컴퓨팅 자원의 소모가 너무 크다는 생각이 들었었기 때문이다. <br>

그 때 옆에서 방관만 하시던 시니어 개발자분이 기특하게 여기신건지는 잘 모르겠지만, 또 다른 튜닝을 해주셨었다. 복합키 관련 설정을 최적화해주셨었던 걸로 기억하는데, 지금은 또 생각이 안난다. 정말 꿀팁인데 그때 테이블 설계하면서 야근했던 기억만 나니 조금 아쉽긴 하다.<br>

시간이 흘러서 상용시스템의 댓글 개발/유지보수 업무를 맡았는데, 이 때도 역시 카운트 테이블을 따로 분리해놓은 것을 보고 신기하게 생각했었다. 내가 생각했던게 틀린게 아니었구나 하는 생각이 들었었다. 아쉽게도 댓글은 아직까지 JPA로 구현해본 적은 없다. 그래서 이번에 댓글, 답글, 댓글 카운트 테이블, 댓글 첨부파일 테이블 이런 것들을 하나 하나 테이블을 설계하면서 정리해볼까 생각 중이다.<br>

조금 사이즈가 커진다 싶으면 디렉터리를 따로 파서 정리를 하게되지 않을까 싶다.<br>

<br>

## 댓글, 댓글 카운트 테이블 설계



## 댓글, 댓글 카운트 객체 매핑 관계도



## 엔티티 매핑



## 테스트 코드



## 출력결과

